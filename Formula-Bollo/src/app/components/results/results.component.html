<div class="bg-secondary-subtle py-5 px-3">
  <div class="container bg-white p-5 h-100 position-relative">
    <div class="d-flex justify-content-evenly flex-wrap mb-5">
      <form [formGroup]="circuitsForm">
        <div class="d-flex flex-column">
          <label class="mb-1">Seleccione circuito:</label>
          <mat-form-field>
            <mat-select formControlName="circuit">
              <mat-option *ngFor="let circuit of circuits" [value]="circuit">
                {{ circuit.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </form>
    </div>
    <div class="table-title d-flex" *ngIf="circuitSelected">
      <h2 class="mb-5">Resultados de la carrera {{ circuitSelected.name }}</h2>
      <img class="ms-4" [src]="'data:image/jpg;base64,' + circuitSelected.flagImage" alt="Bandera del pais del circuito">
    </div>
    <div *ngIf="results.length > 0">
      <table mat-table [dataSource]="results">
        <ng-container matColumnDef="position">
          <th mat-header-cell *matHeaderCellDef> Pos </th>
          <td mat-cell *matCellDef="let result"> {{ result.position != null ? result.position.positionNumber : "DNF"}}</td>
        </ng-container>
        <ng-container matColumnDef="driverName">
          <th mat-header-cell *matHeaderCellDef> Piloto </th>
          <td mat-cell *matCellDef="let result"> {{ result.driver.name }}</td>
        </ng-container>
        <ng-container matColumnDef="teamName">
          <th mat-header-cell *matHeaderCellDef> Escuderia </th>
          <td mat-cell *matCellDef="let result"> {{ result.driver.team.name }}</td>
        </ng-container>
        <ng-container matColumnDef="points">
          <th mat-header-cell *matHeaderCellDef> Puntos </th>
          <td mat-cell *matCellDef="let result"> {{ (result.position != null ? result.position.points : 0) + result.fastlap }}</td>
        </ng-container>
        <tr class="table-header" mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr class="table-row" mat-row *matRowDef="let row; columns: displayedColumns; let i = index" [ngClass]="i % 2 === 0 ? 'table-row-color' : ''"></tr>
      </table>
    </div>
    <div *ngIf="results.length == 0">
      <h3 class="message_no_results">No hay resultados disponibles</h3>
    </div>
  </div>
</div>
